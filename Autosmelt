local player = game.Players.LocalPlayer
local replicatedStorage = game:GetService("ReplicatedStorage")

-- Function to add smelting objects for each tool in the Backpack
local function addSmeltingObjects()
    -- Iterate over all tools in the Backpack
    local backpack = player:WaitForChild("Backpack")

    for _, tool in ipairs(backpack:GetChildren()) do
        if tool:IsA("Tool") then
            -- Create a new Tool instance and smelt it
            replicatedStorage:WaitForChild("Add_Smelting_Object"):FireServer(tool)
            print("Smelting " .. tool.Name)
        end
    end
end

-- Function to claim smelted objects
local function claimSmeltedObjects()
    local smeltingFolder = player:FindFirstChild("Smelting_Folder")

    if not smeltingFolder then
        warn("Smelting_Folder not found for player.")
        return
    end

    -- Iterate over all smelted items and claim them
    for _, target in ipairs(smeltingFolder:GetChildren()) do
        if target:IsA("NumberValue") then
            local id = target:FindFirstChild("ID")
            
            if id and id:IsA("NumberValue") then
                replicatedStorage:WaitForChild("Claim_Smelted_Object"):FireServer(target.Name, id.Value)
                print("Claimed " .. target.Name)
            else
                warn("No valid ID found for " .. target.Name)
            end
        end
    end
end

-- Execute the sequence to smelt multiple tools
addSmeltingObjects()
task.wait(0.5) -- Wait before claiming
claimSmeltedObjects()
