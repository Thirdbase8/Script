-- Highlight Toggle Script for Loot folder in Roblox

local highlightEnabled = false -- State variable to track if highlights are on

local function createHighlight(object)
   if not object:FindFirstChild("Highlight") then
      local highlight = Instance.new("Highlight")
      highlight.Name = "Highlight"
      highlight.Parent = object
      highlight.Adornee = object
      highlight.FillColor = Color3.fromRGB(255, 255, 0)  -- Yellow highlight
      highlight.FillTransparency = 0.5
      highlight.OutlineColor = Color3.fromRGB(255, 255, 255)  -- White outline
      highlight.OutlineTransparency = 0.3
   end
end

local function removeHighlight(object)
   local highlight = object:FindFirstChild("Highlight")
   if highlight then
      highlight:Destroy()
   end
end

local function toggleHighlights()
   local lootFolder = game.Workspace:WaitForChild("Loot")

   if highlightEnabled then
      -- Add highlights to all items in Loot folder
      for _, item in pairs(lootFolder:GetChildren()) do
         createHighlight(item)
      end

      lootFolder.ChildAdded:Connect(function(child)
         createHighlight(child)
      end)
      
      lootFolder.ChildRemoved:Connect(function(child)
         removeHighlight(child)
      end)
   else
      -- Remove highlights from all items in Loot folder
      for _, item in pairs(lootFolder:GetChildren()) do
         removeHighlight(item)
      end
   end
end

-- Create the toggle (you can attach this to your UI system)
game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end

    -- Toggle highlighting with the "H" key (you can change the key as desired)
    if input.KeyCode == Enum.KeyCode.H then
        highlightEnabled = not highlightEnabled
        toggleHighlights()  -- Call the function to update the highlights
    end
end)
