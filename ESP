-- Highlight script for Loot folder in Roblox

-- Get the Loot folder in Workspace
local lootFolder = game.Workspace:WaitForChild("Loot")

-- State variable to track highlight toggle
local highlightEnabled = false

-- Function to create a highlight for each object
local function createHighlight(object)
    -- Check if the object already has a highlight to avoid duplicates
    if not object:FindFirstChild("Highlight") then
        local highlight = Instance.new("Highlight")
        highlight.Name = "Highlight"
        highlight.Parent = object
        highlight.Adornee = object
        highlight.FillColor = Color3.fromRGB(255, 255, 0)  -- Yellow highlight
        highlight.FillTransparency = 0.5
        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)  -- White outline
        highlight.OutlineTransparency = 0.3
    end
end

-- Function to remove highlight from an object
local function removeHighlight(object)
    local highlight = object:FindFirstChild("Highlight")
    if highlight then
        highlight:Destroy()
    end
end

-- Function to toggle highlights on/off
local function toggleHighlights()
    if highlightEnabled then
        -- Add highlights to all items in Loot folder
        for _, item in pairs(lootFolder:GetChildren()) do
            createHighlight(item)
        end

        lootFolder.ChildAdded:Connect(function(child)
            createHighlight(child)
        end)

        lootFolder.ChildRemoved:Connect(function(child)
            removeHighlight(child)
        end)
    else
        -- Remove highlights from all items in Loot folder
        for _, item in pairs(lootFolder:GetChildren()) do
            removeHighlight(item)
        end
    end
end

-- Ensure the Rayfield GUI window exists before creating the toggle
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:GetWindow()

local Tab = Window:CreateTab("Main Features", 4483362458)  -- Use existing tab

-- Highlight Toggle (added to the existing tab)
local ToggleHighlight = Tab:CreateToggle({
   Name = "Toggle Loot Highlight",
   CurrentValue = false,  -- Highlight is initially off
   Flag = "LootHighlightToggle",
   Callback = function(Value)
      highlightEnabled = Value
      toggleHighlights()  -- Call the function to update the highlights
   end
})

-- Load Configuration (ensures the Rayfield configuration is loaded)
Rayfield:LoadConfiguration()
Key Updates:
Using Existing Rayfield GUI: The Window is retrieved using Rayfield:GetWindow(), ensuring that the existing Rayfield window is used, not a new one.

Toggle Control: The Highlight Toggle is created within the existing Main Features tab, so you don't create a new window or tab.

Highlight Functionality:

The toggle now enables or disables the highlight feature for objects inside the Loot folder.
When enabled, highlights are applied to all existing and newly added items in the Loot folder.
When disabled, it removes all highlights from the Loot folder.
How It Works:
No New GUI: The Rayfield window you already have will now contain the toggle to enable or disable the loot highlight feature.
Highlighting: When the toggle is turned on, it will highlight all objects in the Loot folder. When turned off, it removes all the highlights.
This version ensures that you only have one Rayfield GUI window, and you control the highlight feature from there.







You said:
Make the highlight be toggled by the toggle ESP
ChatGPT said:
Understood! You want the highlight to be toggled by the "ESP" toggle in the existing Rayfield GUI window. Here's how we can integrate the highlight functionality with the ESP toggle.

Updated Script with Highlight Controlled by ESP Toggle
lua
Copy
Edit
-- Highlight script for Loot folder in Roblox

-- Get the Loot folder in Workspace
local lootFolder = game.Workspace:WaitForChild("Loot")

-- State variable to track highlight toggle
local highlightEnabled = false

-- Function to create a highlight for each object
local function createHighlight(object)
    -- Check if the object already has a highlight to avoid duplicates
    if not object:FindFirstChild("Highlight") then
        local highlight = Instance.new("Highlight")
        highlight.Name = "Highlight"
        highlight.Parent = object
        highlight.Adornee = object
        highlight.FillColor = Color3.fromRGB(255, 255, 0)  -- Yellow highlight
        highlight.FillTransparency = 0.5
        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)  -- White outline
        highlight.OutlineTransparency = 0.3
    end
end

-- Function to remove highlight from an object
local function removeHighlight(object)
    local highlight = object:FindFirstChild("Highlight")
    if highlight then
        highlight:Destroy()
    end
end

-- Function to toggle highlights on/off
local function toggleHighlights()
    if highlightEnabled then
        -- Add highlights to all items in Loot folder
        for _, item in pairs(lootFolder:GetChildren()) do
            createHighlight(item)
        end

        lootFolder.ChildAdded:Connect(function(child)
            createHighlight(child)
        end)

        lootFolder.ChildRemoved:Connect(function(child)
            removeHighlight(child)
        end)
    else
        -- Remove highlights from all items in Loot folder
        for _, item in pairs(lootFolder:GetChildren()) do
            removeHighlight(item)
        end
    end
end
