-- Roblox Script to toggle highlighting of all objects in the Loot folder

-- Get the Loot folder in Workspace
local lootFolder = game.Workspace:WaitForChild("Loot")

-- Store the current state of highlighting
local highlightEnabled = true

-- Function to create a highlight for each object
local function createHighlight(object)
    -- Check if the object already has a highlight to avoid duplicates
    if not object:FindFirstChild("Highlight") then
        local highlight = Instance.new("Highlight")
        highlight.Name = "Highlight"
        highlight.Parent = object
        highlight.Adornee = object
        highlight.FillColor = Color3.fromRGB(255, 255, 0)  -- Yellow highlight
        highlight.FillTransparency = 0.5
        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)  -- White outline
        highlight.OutlineTransparency = 0.3
    end
end

-- Function to remove the highlights
local function removeHighlight(object)
    local highlight = object:FindFirstChild("Highlight")
    if highlight then
        highlight:Destroy()
    end
end

-- Function to toggle highlights
local function toggleHighlights()
    highlightEnabled = not highlightEnabled
    if highlightEnabled then
        -- Reapply highlights to all objects in Loot
        for _, item in pairs(lootFolder:GetChildren()) do
            createHighlight(item)
        end
    else
        -- Remove highlights from all objects in Loot
        for _, item in pairs(lootFolder:GetChildren()) do
            removeHighlight(item)
        end
    end
end

-- Initial highlight setup when the script starts
if highlightEnabled then
    for _, item in pairs(lootFolder:GetChildren()) do
        createHighlight(item)
    end
end

-- Listen for any new items added to the Loot folder and add or remove highlights
lootFolder.ChildAdded:Connect(function(child)
    if highlightEnabled then
        createHighlight(child)
    end
end)

lootFolder.ChildRemoved:Connect(function(child)
    if highlightEnabled then
        removeHighlight(child)
    end
end)

-- Bind the toggle to a key press (for example, "T" key)
game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end

    if input.KeyCode == Enum.KeyCode.T then
        toggleHighlights()
    end
end)
